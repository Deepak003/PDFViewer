<!DOCTYPE html>
<!-- saved from url=(0048)https://mozilla.github.io/pdf.js/web/viewer.html -->
<html dir="ltr" mozdisallowselectionprint="" style="--loadingBar-end-offset:15px; --zoom-factor:1.25; --viewport-scale-factor:1.66667;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="google" content="notranslate">
    <title>compressed.tracemonkey-pldi-09.pdf</title>


    <link rel="stylesheet" href="./pdfviewer/viewer.css">


<!-- This snippet is used in production (included from viewer.html) -->
<link rel="resource" type="application/l10n" href="https://mozilla.github.io/pdf.js/web/locale/locale.properties">
<script>
  window.pdfFile = 'AHOPT7348H.pdf';
</script>
<script src="./pdfviewer/pdf.js"></script>


  <script src="./pdfviewer/viewer.js"></script>

  </head>

  <body tabindex="1">
    <div id="outerContainer">

      <div id="sidebarContainer">
        <div id="toolbarSidebar">
          <div id="toolbarSidebarLeft">
            <div class="splitToolbarButton toggled">
              <button id="viewThumbnail" class="toolbarButton toggled" title="Show Thumbnails" tabindex="2" data-l10n-id="thumbs">
                 <span data-l10n-id="thumbs_label">Thumbnails</span>
              </button>
              <button id="viewOutline" class="toolbarButton" title="Show Document Outline (double-click to expand/collapse all items)" tabindex="3" data-l10n-id="document_outline" disabled="">
                 <span data-l10n-id="document_outline_label">Document Outline</span>
              </button>
              <button id="viewAttachments" class="toolbarButton" title="Show Attachments" tabindex="4" data-l10n-id="attachments" disabled="">
                 <span data-l10n-id="attachments_label">Attachments</span>
              </button>
              <button id="viewLayers" class="toolbarButton" title="Show Layers (double-click to reset all layers to the default state)" tabindex="5" data-l10n-id="layers" disabled="">
                 <span data-l10n-id="layers_label">Layers</span>
              </button>
            </div>
          </div>

          <div id="toolbarSidebarRight">
            <div id="outlineOptionsContainer" class="hidden">
              <div class="verticalToolbarSeparator"></div>

              <button id="currentOutlineItem" class="toolbarButton" disabled="" title="Find Current Outline Item" tabindex="6" data-l10n-id="current_outline_item">
                <span data-l10n-id="current_outline_item_label">Current Outline Item</span>
              </button>
            </div>
          </div>
        </div>
        <div id="sidebarContent">
          <div id="thumbnailView"></div>
          <div id="outlineView" class="hidden"></div>
          <div id="attachmentsView" class="hidden"></div>
          <div id="layersView" class="hidden"></div>
        </div>
        <div id="sidebarResizer"></div>
      </div>  <!-- sidebarContainer -->

      <div id="mainContainer">
        <div class="findbar hidden doorHanger" id="findbar">
          <div id="findbarInputContainer">
            <input id="findInput" class="toolbarField" title="Find" placeholder="Find in document…" tabindex="91" data-l10n-id="find_input">
            <div class="splitToolbarButton">
              <button id="findPrevious" class="toolbarButton findPrevious" title="Find the previous occurrence of the phrase" tabindex="92" data-l10n-id="find_previous">
                <span data-l10n-id="find_previous_label">Previous</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button id="findNext" class="toolbarButton findNext" title="Find the next occurrence of the phrase" tabindex="93" data-l10n-id="find_next">
                <span data-l10n-id="find_next_label">Next</span>
              </button>
            </div>
          </div>

          <div id="findbarOptionsOneContainer">
            <input type="checkbox" id="findHighlightAll" class="toolbarField" tabindex="94">
            <label for="findHighlightAll" class="toolbarLabel" data-l10n-id="find_highlight">Highlight all</label>
            <input type="checkbox" id="findMatchCase" class="toolbarField" tabindex="95">
            <label for="findMatchCase" class="toolbarLabel" data-l10n-id="find_match_case_label">Match case</label>
          </div>
          <div id="findbarOptionsTwoContainer">
            <input type="checkbox" id="findEntireWord" class="toolbarField" tabindex="96">
            <label for="findEntireWord" class="toolbarLabel" data-l10n-id="find_entire_word_label">Whole words</label>
            <span id="findResultsCount" class="toolbarLabel hidden"></span>
          </div>

          <div id="findbarMessageContainer">
            <span id="findMsg" class="toolbarLabel"></span>
          </div>
        </div>  <!-- findbar -->

        <div id="secondaryToolbar" class="secondaryToolbar hidden doorHangerRight">
          <div id="secondaryToolbarButtonContainer">
            <button id="secondaryPresentationMode" class="secondaryToolbarButton presentationMode visibleLargeView" title="Switch to Presentation Mode" tabindex="51" data-l10n-id="presentation_mode">
              <span data-l10n-id="presentation_mode_label">Presentation Mode</span>
            </button>

            <button id="secondaryOpenFile" class="secondaryToolbarButton openFile visibleLargeView" title="Open File" tabindex="52" data-l10n-id="open_file">
              <span data-l10n-id="open_file_label">Open</span>
            </button>

            <button id="secondaryPrint" class="secondaryToolbarButton print visibleMediumView" title="Print" tabindex="53" data-l10n-id="print">
              <span data-l10n-id="print_label">Print</span>
            </button>

            <button id="secondaryDownload" class="secondaryToolbarButton download visibleMediumView" title="Download" tabindex="54" data-l10n-id="download">
              <span data-l10n-id="download_label">Download</span>
            </button>

            <a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=1&amp;zoom=auto,-120,798" id="secondaryViewBookmark" class="secondaryToolbarButton bookmark visibleSmallView" title="Current view (copy or open in new window)" tabindex="55" data-l10n-id="bookmark">
              <span data-l10n-id="bookmark_label">Current View</span>
            </a>

            <div class="horizontalToolbarSeparator visibleLargeView"></div>

            <button id="firstPage" class="secondaryToolbarButton firstPage" title="Go to First Page" tabindex="56" data-l10n-id="first_page" disabled="">
              <span data-l10n-id="first_page_label">Go to First Page</span>
            </button>
            <button id="lastPage" class="secondaryToolbarButton lastPage" title="Go to Last Page" tabindex="57" data-l10n-id="last_page">
              <span data-l10n-id="last_page_label">Go to Last Page</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="pageRotateCw" class="secondaryToolbarButton rotateCw" title="Rotate Clockwise" tabindex="58" data-l10n-id="page_rotate_cw">
              <span data-l10n-id="page_rotate_cw_label">Rotate Clockwise</span>
            </button>
            <button id="pageRotateCcw" class="secondaryToolbarButton rotateCcw" title="Rotate Anti-Clockwise" tabindex="59" data-l10n-id="page_rotate_ccw">
              <span data-l10n-id="page_rotate_ccw_label">Rotate Anti-Clockwise</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="cursorSelectTool" class="secondaryToolbarButton selectTool toggled" title="Enable Text Selection Tool" tabindex="60" data-l10n-id="cursor_text_select_tool">
              <span data-l10n-id="cursor_text_select_tool_label">Text Selection Tool</span>
            </button>
            <button id="cursorHandTool" class="secondaryToolbarButton handTool" title="Enable Hand Tool" tabindex="61" data-l10n-id="cursor_hand_tool">
              <span data-l10n-id="cursor_hand_tool_label">Hand Tool</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="scrollPage" class="secondaryToolbarButton scrollPage" title="Use Page Scrolling" tabindex="62" data-l10n-id="scroll_page">
              <span data-l10n-id="scroll_page_label">Page Scrolling</span>
            </button>
            <button id="scrollVertical" class="secondaryToolbarButton scrollVertical toggled" title="Use Vertical Scrolling" tabindex="63" data-l10n-id="scroll_vertical">
              <span data-l10n-id="scroll_vertical_label">Vertical Scrolling</span>
            </button>
            <button id="scrollHorizontal" class="secondaryToolbarButton scrollHorizontal" title="Use Horizontal Scrolling" tabindex="64" data-l10n-id="scroll_horizontal">
              <span data-l10n-id="scroll_horizontal_label">Horizontal Scrolling</span>
            </button>
            <button id="scrollWrapped" class="secondaryToolbarButton scrollWrapped" title="Use Wrapped Scrolling" tabindex="65" data-l10n-id="scroll_wrapped">
              <span data-l10n-id="scroll_wrapped_label">Wrapped Scrolling</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="spreadNone" class="secondaryToolbarButton spreadNone toggled" title="Do not join page spreads" tabindex="66" data-l10n-id="spread_none">
              <span data-l10n-id="spread_none_label">No Spreads</span>
            </button>
            <button id="spreadOdd" class="secondaryToolbarButton spreadOdd" title="Join page spreads starting with odd-numbered pages" tabindex="67" data-l10n-id="spread_odd">
              <span data-l10n-id="spread_odd_label">Odd Spreads</span>
            </button>
            <button id="spreadEven" class="secondaryToolbarButton spreadEven" title="Join page spreads starting with even-numbered pages" tabindex="68" data-l10n-id="spread_even">
              <span data-l10n-id="spread_even_label">Even Spreads</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="documentProperties" class="secondaryToolbarButton documentProperties" title="Document Properties…" tabindex="69" data-l10n-id="document_properties">
              <span data-l10n-id="document_properties_label">Document Properties…</span>
            </button>
          </div>
        </div>  <!-- secondaryToolbar -->

        <div class="toolbar">
          <div id="toolbarContainer">
            <div id="toolbarViewer">
              <div id="toolbarViewerLeft">
                <button id="sidebarToggle" class="toolbarButton" title="Toggle Sidebar" tabindex="11" data-l10n-id="toggle_sidebar" aria-expanded="false" aria-controls="sidebarContainer">
                  <span data-l10n-id="toggle_sidebar_label">Toggle Sidebar</span>
                </button>
                <div class="toolbarButtonSpacer"></div>
                <button id="viewFind" class="toolbarButton" title="Find in Document" tabindex="12" data-l10n-id="findbar" aria-expanded="false" aria-controls="findbar">
                  <span data-l10n-id="findbar_label">Find</span>
                </button>
                <div class="splitToolbarButton hiddenSmallView">
                  <button class="toolbarButton pageUp" title="Previous Page" id="previous" tabindex="13" data-l10n-id="previous" disabled="">
                    <span data-l10n-id="previous_label">Previous</span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button class="toolbarButton pageDown" title="Next Page" id="next" tabindex="14" data-l10n-id="next">
                    <span data-l10n-id="next_label">Next</span>
                  </button>
                </div>
                <input type="string" id="pageNumber" class="toolbarField pageNumber" title="Page" value="1" size="4" min="1" tabindex="15" data-l10n-id="page" autocomplete="off" max="..wait">
                <span id="numPages" class="toolbarLabel">of ..loading</span>
              </div>
              <div id="toolbarViewerRight">
                <button id="presentationMode" class="toolbarButton presentationMode hiddenLargeView" title="Switch to Presentation Mode" tabindex="31" data-l10n-id="presentation_mode">
                  <span data-l10n-id="presentation_mode_label">Presentation Mode</span>
                </button>

                <button id="openFile" class="toolbarButton openFile hiddenLargeView" title="Open File" tabindex="32" data-l10n-id="open_file">
                  <span data-l10n-id="open_file_label">Open</span>
                </button>

                <button id="print" class="toolbarButton print hiddenMediumView" title="Print" tabindex="33" data-l10n-id="print">
                  <span data-l10n-id="print_label">Print</span>
                </button>

                <button id="download" class="toolbarButton download hiddenMediumView" title="Download" tabindex="34" data-l10n-id="download">
                  <span data-l10n-id="download_label">Download</span>
                </button>
                <a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=1&amp;zoom=auto,-120,798" id="viewBookmark" class="toolbarButton bookmark hiddenSmallView" title="Current view (copy or open in new window)" tabindex="35" data-l10n-id="bookmark">
                  <span data-l10n-id="bookmark_label">Current View</span>
                </a>

                <div class="verticalToolbarSeparator hiddenSmallView"></div>

                <button id="secondaryToolbarToggle" class="toolbarButton" title="Tools" tabindex="36" data-l10n-id="tools" aria-expanded="false" aria-controls="secondaryToolbar">
                  <span data-l10n-id="tools_label">Tools</span>
                </button>
              </div>
              <div id="toolbarViewerMiddle">
                <div class="splitToolbarButton">
                  <button id="zoomOut" class="toolbarButton zoomOut" title="Zoom Out" tabindex="21" data-l10n-id="zoom_out">
                    <span data-l10n-id="zoom_out_label">Zoom Out</span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button id="zoomIn" class="toolbarButton zoomIn" title="Zoom In" tabindex="22" data-l10n-id="zoom_in">
                    <span data-l10n-id="zoom_in_label">Zoom In</span>
                   </button>
                </div>
                <span id="scaleSelectContainer" class="dropdownToolbarButton">
                  <select id="scaleSelect" title="Zoom" tabindex="23" data-l10n-id="zoom">
                    <option id="pageAutoOption" title="" value="auto" selected="selected" data-l10n-id="page_scale_auto">Automatic Zoom</option>
                    <option id="pageActualOption" title="" value="page-actual" data-l10n-id="page_scale_actual">Actual Size</option>
                    <option id="pageFitOption" title="" value="page-fit" data-l10n-id="page_scale_fit">Page Fit</option>
                    <option id="pageWidthOption" title="" value="page-width" data-l10n-id="page_scale_width">Page Width</option>
                    <option id="customScaleOption" title="" value="custom" disabled="disabled" hidden="true"></option>
                    <option title="" value="0.5" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 50 }">50%</option>
                    <option title="" value="0.75" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 75 }">75%</option>
                    <option title="" value="1" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 100 }">100%</option>
                    <option title="" value="1.25" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 125 }">125%</option>
                    <option title="" value="1.5" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 150 }">150%</option>
                    <option title="" value="2" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 200 }">200%</option>
                    <option title="" value="3" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 300 }">300%</option>
                    <option title="" value="4" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 400 }">400%</option>
                  </select>
                </span>
              </div>
            </div>
            <div id="loadingBar" class="hidden">
              <div class="progress" style="height: 100%; width: 100%;">
                <div class="glimmer">
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="viewerContainer" tabindex="0">
          <div id="viewer" class="pdfViewer"><div class="page" data-page-number="1" role="region" aria-label="Page 1" data-loaded="true" style="width: 1019px; height: 1319px;"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas width="2040" height="2640" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span role="presentation" dir="ltr" style="left: 134.193px; top: 128.305px; font-size: 29.888px; font-family: sans-serif; transform: scaleX(0.969954);">Trace-based Just-in-Time Type Specialization for Dynamic</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 439.51px; top: 161.514px; font-size: 29.888px; font-family: sans-serif; transform: scaleX(0.932114);">Languages</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 200.537px; top: 230.588px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.904426);">Andreas Gal</span><span role="presentation" dir="ltr" style="left: 292.336px; top: 227.976px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 300.223px; top: 227.976px; font-size: 13.2835px; font-family: sans-serif;">+</span><span role="presentation" dir="ltr" style="left: 312.03px; top: 230.588px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.910515);">, Brendan Eich</span><span role="presentation" dir="ltr" style="left: 421.089px; top: 227.976px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 428.976px; top: 230.588px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.915136);">, Mike Shaver</span><span role="presentation" dir="ltr" style="left: 531.131px; top: 227.976px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 539.018px; top: 230.588px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.920867);">, David Anderson</span><span role="presentation" dir="ltr" style="left: 668.003px; top: 227.976px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 675.89px; top: 230.588px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.941009);">, David Mandelin</span><span role="presentation" dir="ltr" style="left: 803.871px; top: 227.976px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 811.758px; top: 230.588px; font-size: 18.2648px; font-family: sans-serif;">,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 155.903px; top: 252.174px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.914365);">Mohammad R. Haghighat</span><span role="presentation" dir="ltr" style="left: 346.148px; top: 249.561px; font-size: 13.2835px; font-family: sans-serif;">$</span><span role="presentation" dir="ltr" style="left: 354.035px; top: 252.174px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.924613);">, Blake Kaplan</span><span role="presentation" dir="ltr" style="left: 462.911px; top: 249.561px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 470.798px; top: 252.174px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.905472);">, Graydon Hoare</span><span role="presentation" dir="ltr" style="left: 593.025px; top: 249.561px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 600.913px; top: 252.174px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.926915);">, Boris Zbarsky</span><span role="presentation" dir="ltr" style="left: 713.77px; top: 249.561px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 721.657px; top: 252.174px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.901193);">, Jason Orendorff</span><span role="presentation" dir="ltr" style="left: 848.506px; top: 249.561px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 856.393px; top: 252.174px; font-size: 18.2648px; font-family: sans-serif;">,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 113.792px; top: 273.76px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.856284);">Jesse Ruderman</span><span role="presentation" dir="ltr" style="left: 231.982px; top: 271.147px; font-size: 13.2835px; font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 239.869px; top: 273.76px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.940988);">, Edwin Smith</span><span role="presentation" dir="ltr" style="left: 344.909px; top: 271.147px; font-size: 13.2835px; font-family: sans-serif;">#</span><span role="presentation" dir="ltr" style="left: 357.501px; top: 273.76px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.933128);">, Rick Reitmaier</span><span role="presentation" dir="ltr" style="left: 477.737px; top: 271.147px; font-size: 13.2835px; font-family: sans-serif;">#</span><span role="presentation" dir="ltr" style="left: 490.329px; top: 273.76px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.921839);">, Michael Bebenita</span><span role="presentation" dir="ltr" style="left: 628.811px; top: 271.147px; font-size: 13.2835px; font-family: sans-serif;">+</span><span role="presentation" dir="ltr" style="left: 640.619px; top: 273.76px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.897206);">, Mason Chang</span><span role="presentation" dir="ltr" style="left: 751.723px; top: 271.147px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.55636);">+#</span><span role="presentation" dir="ltr" style="left: 776.122px; top: 273.76px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.922496);">, Michael Franz</span><span role="presentation" dir="ltr" style="left: 891.263px; top: 271.147px; font-size: 13.2835px; font-family: sans-serif;">+</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 443.609px; top: 301.323px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.951415);">Mozilla Corporation</span><span role="presentation" dir="ltr" style="left: 566.058px; top: 298.96px; font-size: 9.96267px; font-family: monospace;">∗</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 151.627px; top: 317.927px; font-size: 14.944px; font-family: sans-serif;">{</span><span role="presentation" dir="ltr" style="left: 159.307px; top: 317.927px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875071);">gal,brendan,shaver,danderson,dmandelin,mrbkap,graydon,bz,jorendorff,jruderman</span><span role="presentation" dir="ltr" style="left: 763.409px; top: 317.927px; font-size: 14.944px; font-family: sans-serif;">}</span><span role="presentation" dir="ltr" style="left: 771.089px; top: 317.927px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">@mozilla.com</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 445.135px; top: 344.893px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.923349);">Adobe Corporation</span><span role="presentation" dir="ltr" style="left: 560.935px; top: 342.53px; font-size: 9.96267px; font-family: sans-serif;">#</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 394.837px; top: 361.497px; font-size: 14.944px; font-family: sans-serif;">{</span><span role="presentation" dir="ltr" style="left: 402.517px; top: 361.497px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">edwsmith,rreitmai</span><span role="presentation" dir="ltr" style="left: 535.89px; top: 361.497px; font-size: 14.944px; font-family: sans-serif;">}</span><span role="presentation" dir="ltr" style="left: 543.57px; top: 361.497px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">@adobe.com</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 453.296px; top: 389.016px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.935722);">Intel Corporation</span><span role="presentation" dir="ltr" style="left: 556.647px; top: 386.653px; font-size: 9.96267px; font-family: sans-serif;">$</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 383.069px; top: 405.621px; font-size: 14.944px; font-family: sans-serif;">{</span><span role="presentation" dir="ltr" style="left: 390.749px; top: 405.621px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mohammad.r.haghighat</span><span role="presentation" dir="ltr" style="left: 547.658px; top: 405.621px; font-size: 14.944px; font-family: sans-serif;">}</span><span role="presentation" dir="ltr" style="left: 555.338px; top: 405.621px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">@intel.com</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 410.273px; top: 432.033px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.958241);">University of California, Irvine</span><span role="presentation" dir="ltr" style="left: 596.442px; top: 429.669px; font-size: 9.96267px; font-family: sans-serif;">+</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 386.992px; top: 448.637px; font-size: 14.944px; font-family: sans-serif;">{</span><span role="presentation" dir="ltr" style="left: 394.671px; top: 448.637px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mbebenit,changm,franz</span><span role="presentation" dir="ltr" style="left: 559.427px; top: 448.637px; font-size: 14.944px; font-family: sans-serif;">}</span><span role="presentation" dir="ltr" style="left: 567.106px; top: 448.637px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">@uci.edu</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 558.89px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(1.01473);">Abstract</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 584.793px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.928301);">Dynamic languages such as JavaScript are more difficult to com-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 601.397px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.919273);">pile than statically typed ones. Since no concrete type information</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 618.002px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.888647);">is available, traditional compilers need to emit generic code that can</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 634.606px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.897494);">handle all possible type combinations at runtime. We present an al-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 651.211px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.939057);">ternative compilation technique for dynamically-typed languages</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 667.815px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.910523);">that identifies frequently executed loop traces at run-time and then</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 684.419px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.94461);">generates machine code on the fly that is specialized for the ac-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 701.024px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.937204);">tual dynamic types occurring on each path through the loop. Our</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 717.628px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.896905);">method provides cheap inter-procedural type specialization, and an</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 734.233px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.928254);">elegant and efficient way of incrementally compiling lazily discov-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 750.837px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.897435);">ered alternative paths through nested loops. We have implemented</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 767.441px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.912303);">a dynamic compiler for JavaScript based on our technique and we</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 784.046px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.921039);">have measured speedups of 10x and more for certain benchmark</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 800.65px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.894838);">programs.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 826.657px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.947363);">Categories and Subject Descriptors</span><span role="presentation" dir="ltr" style="left: 312.636px; top: 826.657px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 327.581px; top: 826.657px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(1.00068);">D.3.4 [</span><span role="presentation" dir="ltr" style="left: 371.618px; top: 826.657px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.944797);">Programming Lan-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 843.261px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.857653);">guages</span><span role="presentation" dir="ltr" style="left: 132.037px; top: 843.261px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.898342);">]: Processors —</span><span role="presentation" dir="ltr" style="left: 227.499px; top: 843.261px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 231.234px; top: 843.261px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.909762);">Incremental compilers, code generation</span><span role="presentation" dir="ltr" style="left: 469.214px; top: 843.261px; font-size: 14.944px; font-family: sans-serif;">.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 869.268px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.942669);">General Terms</span><span role="presentation" dir="ltr" style="left: 182.354px; top: 869.268px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 197.293px; top: 869.268px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.920497);">Design, Experimentation, Measurement, Perfor-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 885.873px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.872372);">mance.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 911.88px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.902164);">Keywords</span><span role="presentation" dir="ltr" style="left: 149.178px; top: 911.88px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 164.121px; top: 911.88px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.911689);">JavaScript, just-in-time compilation, trace trees.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 946.853px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.899536);">1.</span><span role="presentation" dir="ltr" style="left: 103.699px; top: 946.853px; font-size: 18.2648px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 121.963px; top: 946.853px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(1.03882);">Introduction</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 972.756px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.902355);">Dynamic languages</span><span role="presentation" dir="ltr" style="left: 208.401px; top: 972.756px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 211.707px; top: 972.756px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.877869);">such as JavaScript, Python, and Ruby, are pop-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 989.36px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.887045);">ular since they are expressive, accessible to non-experts, and make</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1005.96px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.907152);">deployment as easy as distributing a source file. They are used for</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1022.57px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.948547);">small scripts as well as for complex applications. JavaScript, for</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1039.17px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.912348);">example, is the de facto standard for client-side web programming</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1111.09px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.955163);">Permission to make digital or hard copies of all or part of this work for personal or</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1124.37px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.909981);">classroom use is granted without fee provided that copies are not made or distributed</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1137.66px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.904637);">for profit or commercial advantage and that copies bear this notice and the full citation</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1150.94px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.915413);">on the first page. To copy otherwise, to republish, to post on servers or to redistribute</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1164.22px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.909022);">to lists, requires prior specific permission and/or a fee.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1180.83px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.992319);">PLDI’09,</span><span role="presentation" dir="ltr" style="left: 134.226px; top: 1180.83px; font-size: 11.623px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 146.046px; top: 1180.83px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.912197);">June 15–20, 2009, Dublin, Ireland.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1194.11px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(1.00616);">Copyright c</span><span role="presentation" dir="ltr" style="left: 139.932px; top: 1194.11px; font-size: 11.623px; font-family: monospace;">©</span><span role="presentation" dir="ltr" style="left: 153.171px; top: 1194.11px; font-size: 11.623px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 156.076px; top: 1194.11px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.905757);">2009 ACM 978-1-60558-392-1/09/06. . . $5.00</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 561.547px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.921055);">and is used for the application logic of browser-based productivity</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 578.151px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.939153);">applications such as Google Mail, Google Docs and Zimbra Col-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 594.756px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.969419);">laboration Suite. In this domain, in order to provide a fluid user</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 611.36px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.890225);">experience and enable a new generation of applications, virtual ma-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 627.964px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.906533);">chines must provide a low startup time and high performance.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 548.282px; top: 644.569px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.936158);">Compilers for statically typed languages rely on type informa-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 661.173px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.898616);">tion to generate efficient machine code. In a dynamically typed pro-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 677.778px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.924625);">gramming language such as JavaScript, the types of expressions</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 694.382px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.935519);">may vary at runtime. This means that the compiler can no longer</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 710.986px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.92286);">easily transform operations into machine instructions that operate</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 727.591px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.924656);">on one specific type. Without exact type information, the compiler</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 744.195px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.926428);">must emit slower generalized machine code that can deal with all</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 760.8px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.937365);">potential type combinations. While compile-time static type infer-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 777.404px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.965461);">ence might be able to gather type information to generate opti-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 794.008px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.935503);">mized machine code, traditional static analysis is very expensive</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 810.613px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.919257);">and hence not well suited for the highly interactive environment of</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 827.217px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.892439);">a web browser.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 548.282px; top: 843.822px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.942517);">We present a trace-based compilation technique for dynamic</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 860.426px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.915759);">languages that reconciles speed of compilation with excellent per-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 877.03px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.877329);">formance of the generated machine code. Our system uses a mixed-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 893.635px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.887031);">mode execution approach: the system starts running JavaScript in a</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 910.239px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.908918);">fast-starting bytecode interpreter. As the program runs, the system</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 926.844px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.929362);">identifies</span><span role="presentation" dir="ltr" style="left: 583.156px; top: 926.844px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 589.498px; top: 926.844px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.919581);">hot</span><span role="presentation" dir="ltr" style="left: 608.597px; top: 926.844px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 615.209px; top: 926.844px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.91754);">(frequently executed) bytecode sequences, records</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 943.448px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.943435);">them, and compiles them to fast native code. We call such a se-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 960.052px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.902154);">quence of instructions a</span><span role="presentation" dir="ltr" style="left: 670.713px; top: 960.052px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 674.447px; top: 960.052px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.917866);">trace</span><span role="presentation" dir="ltr" style="left: 704.932px; top: 960.052px; font-size: 14.944px; font-family: sans-serif;">.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 548.282px; top: 976.657px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.955849);">Unlike method-based dynamic compilers, our dynamic com-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 993.261px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.963571);">piler operates at the granularity of individual loops. This design</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1009.87px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.940884);">choice is based on the expectation that programs spend most of</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1026.47px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.940917);">their time in hot loops. Even in dynamically typed languages, we</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1043.07px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.895184);">expect hot loops to be mostly</span><span role="presentation" dir="ltr" style="left: 701.572px; top: 1043.07px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 704.882px; top: 1043.07px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.897289);">type-stable</span><span role="presentation" dir="ltr" style="left: 770.455px; top: 1043.07px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.888305);">, meaning that the types of</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1059.68px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.896993);">values are invariant. (12) For example, we would expect loop coun-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1076.28px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.903805);">ters that start as integers to remain integers for all iterations. When</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1092.89px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.914012);">both of these expectations hold, a trace-based compiler can cover</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1109.49px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.907197);">the program execution with a small number of type-specialized, ef-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1126.1px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.925792);">ficiently compiled traces.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 548.282px; top: 1142.7px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.909912);">Each compiled trace covers one path through the program with</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1159.31px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.893604);">one mapping of values to types. When the VM executes a compiled</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1175.91px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.99141);">trace, it cannot guarantee that the same path will be followed</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1192.51px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.967496);">or that the same types will occur in subsequent loop iterations.</span><div class="endOfContent"></div></div></div><div class="page" data-page-number="2" role="region" aria-label="Page 2" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas width="2040" height="2640" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span role="presentation" dir="ltr" style="left: 90px; top: 121.328px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.895033);">Hence, recording and compiling a trace</span><span role="presentation" dir="ltr" style="left: 322.648px; top: 121.328px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 325.768px; top: 121.328px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.871643);">speculates</span><span role="presentation" dir="ltr" style="left: 388.025px; top: 121.328px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 391.147px; top: 121.328px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.868165);">that the path and</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 137.933px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.905423);">typing will be exactly as they were during recording for subsequent</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 154.537px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.921756);">iterations of the loop.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 171.141px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.92241);">Every compiled trace contains all the</span><span role="presentation" dir="ltr" style="left: 334.354px; top: 171.141px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 338.617px; top: 171.141px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.89669);">guards</span><span role="presentation" dir="ltr" style="left: 379.578px; top: 171.141px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 383.838px; top: 171.141px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.906899);">(checks) required</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 187.746px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.981295);">to validate the speculation. If one of the guards fails (if control</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 204.35px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.964813);">flow is different, or a value of a different type is generated), the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 220.955px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.960838);">trace exits. If an exit becomes hot, the VM can record a</span><span role="presentation" dir="ltr" style="left: 441.064px; top: 220.955px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 446.618px; top: 220.955px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.916973);">branch</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 237.559px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.917866);">trace</span><span role="presentation" dir="ltr" style="left: 120.486px; top: 237.559px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 124.159px; top: 237.559px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.914689);">starting at the exit to cover the new path. In this way, the VM</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 254.163px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.87274);">records a</span><span role="presentation" dir="ltr" style="left: 144.351px; top: 254.163px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 148.087px; top: 254.163px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.901732);">trace tree</span><span role="presentation" dir="ltr" style="left: 204.993px; top: 254.163px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 208.728px; top: 254.163px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.909732);">covering all the hot paths through the loop.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 270.768px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.974151);">Nested loops can be difficult to optimize for tracing VMs. In</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 287.372px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.921222);">a na ̈</span><span role="presentation" dir="ltr" style="left: 116.045px; top: 287.372px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.946221);">ıve implementation, inner loops would become hot first, and</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 303.977px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.955949);">the VM would start tracing there. When the inner loop exits, the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 320.581px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.916358);">VM would detect that a different branch was taken. The VM would</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 337.185px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.907107);">try to record a branch trace, and find that the trace reaches not the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 353.79px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.922673);">inner loop header, but the outer loop header. At this point, the VM</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 370.394px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.913936);">could continue tracing until it reaches the inner loop header again,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 386.999px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.957776);">thus tracing the outer loop inside a trace tree for the inner loop.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 403.603px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.908873);">But this requires tracing a copy of the outer loop for every side exit</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 420.207px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.935407);">and type combination in the inner loop. In essence, this is a form</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 436.812px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.931721);">of unintended tail duplication, which can easily overflow the code</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 453.416px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.911177);">cache. Alternatively, the VM could simply stop tracing, and give up</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 470.021px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.902194);">on ever tracing outer loops.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 486.625px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.954869);">We solve the nested loop problem by recording</span><span role="presentation" dir="ltr" style="left: 407.834px; top: 486.625px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 413.837px; top: 486.625px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.908225);">nested trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 503.229px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.858025);">trees</span><span role="presentation" dir="ltr" style="left: 118.497px; top: 503.229px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.886766);">. Our system traces the inner loop exactly as the na ̈</span><span role="presentation" dir="ltr" style="left: 419.522px; top: 503.229px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.90299);">ıve version.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 519.834px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.893604);">The system stops extending the inner tree when it reaches an outer</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 536.438px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.919211);">loop, but then it starts a new trace at the outer loop header. When</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 553.043px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.886959);">the outer loop reaches the inner loop header, the system tries to call</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 569.647px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.887045);">the trace tree for the inner loop. If the call succeeds, the VM records</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 586.251px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.979289);">the call to the inner tree as part of the outer trace and finishes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 602.856px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.950957);">the outer trace as normal. In this way, our system can trace any</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 619.46px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.900275);">number of loops nested to any depth without causing excessive tail</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 636.065px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.939158);">duplication.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 652.669px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.949779);">These techniques allow a VM to dynamically translate a pro-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 669.273px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.928223);">gram to nested, type-specialized trace trees. Because traces can</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 685.878px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.912272);">cross function call boundaries, our techniques also achieve the ef-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 702.482px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.905438);">fects of inlining. Because traces have no internal control-flow joins,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 719.087px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.973478);">they can be optimized in linear time by a simple compiler (10).</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 735.691px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.977467);">Thus, our tracing VM efficiently performs the same kind of op-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 752.295px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.942833);">timizations that would require interprocedural analysis in a static</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 768.9px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.914655);">optimization setting. This makes tracing an attractive and effective</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 785.504px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.918037);">tool to type specialize even complex function call-rich code.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 802.109px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.899752);">We implemented these techniques for an existing JavaScript in-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 818.713px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.943075);">terpreter, SpiderMonkey. We call the resulting tracing VM</span><span role="presentation" dir="ltr" style="left: 445.025px; top: 818.713px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 449.711px; top: 818.713px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.910311);">Trace-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 835.317px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.892723);">Monkey</span><span role="presentation" dir="ltr" style="left: 136.7px; top: 835.317px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.918364);">. TraceMonkey supports all the JavaScript features of Spi-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 851.922px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.90824);">derMonkey, with a 2x-20x speedup for traceable programs.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 868.526px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.920575);">This paper makes the following contributions:</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 98.7172px; top: 899.906px; font-size: 13.2835px; font-family: monospace;">•</span><span role="presentation" dir="ltr" style="left: 105.771px; top: 899.906px; font-size: 13.2835px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 111.586px; top: 900.075px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.921336);">We explain an algorithm for dynamically forming trace trees to</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 111.586px; top: 916.679px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.862868);">cover a program, representing nested loops as nested trace trees.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 98.7172px; top: 939.757px; font-size: 13.2835px; font-family: monospace;">•</span><span role="presentation" dir="ltr" style="left: 105.771px; top: 939.757px; font-size: 13.2835px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 111.586px; top: 939.925px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.894056);">We explain how to speculatively generate efficient type-specialized</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 111.586px; top: 956.529px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.902584);">code for traces from dynamic language programs.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 98.7172px; top: 979.607px; font-size: 13.2835px; font-family: monospace;">•</span><span role="presentation" dir="ltr" style="left: 105.771px; top: 979.607px; font-size: 13.2835px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 111.586px; top: 979.776px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.906465);">We validate our tracing techniques in an implementation based</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 111.586px; top: 996.38px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.926258);">on the SpiderMonkey JavaScript interpreter, achieving 2x-20x</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 111.586px; top: 1012.98px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.880845);">speedups on many programs.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 1044.53px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.893894);">The remainder of this paper is organized as follows. Section 3 is</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1061.14px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.91579);">a general overview of trace tree based compilation we use to cap-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1077.74px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.944561);">ture and compile frequently executed code regions. In Section 4</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1094.35px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.929945);">we describe our approach of covering nested loops using a num-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1110.95px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.952167);">ber of individual trace trees. In Section 5 we describe our trace-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1127.55px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.898587);">compilation based speculative type specialization approach we use</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1144.16px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.907122);">to generate efficient machine code from recorded bytecode traces.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1160.76px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.957944);">Our implementation of a dynamic type-specializing compiler for</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1177.37px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.921133);">JavaScript is described in Section 6. Related work is discussed in</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1193.97px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.895259);">Section 8. In Section 7 we evaluate our dynamic compiler based on</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 118.422px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">1 for (var i = 2; i &lt; 100; ++i) {</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 135.027px; font-size: 14.944px; font-family: monospace;">2</span><span role="presentation" dir="ltr" style="left: 536.202px; top: 135.027px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 559.739px; top: 135.027px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">if (!primes[i])</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 151.631px; font-size: 14.944px; font-family: monospace;">3</span><span role="presentation" dir="ltr" style="left: 536.202px; top: 151.631px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 575.43px; top: 151.631px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">continue;</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 168.236px; font-size: 14.944px; font-family: monospace;">4</span><span role="presentation" dir="ltr" style="left: 536.202px; top: 168.236px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 559.739px; top: 168.236px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">for (var k = i + i; i &lt; 100; k += i)</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 184.84px; font-size: 14.944px; font-family: monospace;">5</span><span role="presentation" dir="ltr" style="left: 536.202px; top: 184.84px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 575.43px; top: 184.84px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">primes[k] = false;</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 201.444px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">6 }</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 238.441px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.998754);">Figure 1. Sample program: sieve of Eratosthenes.</span><span role="presentation" dir="ltr" style="left: 857.617px; top: 238.441px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 863.72px; top: 238.441px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">primes</span><span role="presentation" dir="ltr" style="left: 910.794px; top: 238.441px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 916.894px; top: 238.441px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.923857);">is</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 255.045px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.971192);">initialized to an array of 100</span><span role="presentation" dir="ltr" style="left: 705.801px; top: 255.045px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 711.081px; top: 255.045px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">false</span><span role="presentation" dir="ltr" style="left: 750.309px; top: 255.045px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 755.585px; top: 255.045px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.941699);">values on entry to this code</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 271.65px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.896473);">snippet.</span><span role="presentation" dir="ltr" style="left: 675.67px; top: 353.282px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.08993);">Interpret</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 673.028px; top: 363.334px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00065);">Bytecodes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 677.353px; top: 430.111px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.10024);">Monitor</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 562.698px; top: 457.396px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.06947);">Record</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 558.861px; top: 467.449px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00065);">LIR</span><span role="presentation" dir="ltr" style="left: 572.268px; top: 467.449px; font-size: 8.6164px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 574.512px; top: 467.449px; font-size: 8.6164px; font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 579.46px; top: 467.449px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00058);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 788.993px; top: 523.455px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.06215);">Execute</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 775.343px; top: 533.508px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00048);">Compiled</span><span role="presentation" dir="ltr" style="left: 811.73px; top: 533.508px; font-size: 8.6164px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 813.982px; top: 533.508px; font-size: 8.6164px; font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 818.93px; top: 533.508px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00058);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 794.505px; top: 457.396px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.07019);">Enter</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 775.343px; top: 467.449px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00048);">Compiled</span><span role="presentation" dir="ltr" style="left: 811.73px; top: 467.449px; font-size: 8.6164px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 813.982px; top: 467.449px; font-size: 8.6164px; font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 818.93px; top: 467.449px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00058);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 560.546px; top: 523.455px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.07633);">Compile</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 558.861px; top: 533.508px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00065);">LIR</span><span role="presentation" dir="ltr" style="left: 572.268px; top: 533.508px; font-size: 8.6164px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 574.512px; top: 533.508px; font-size: 8.6164px; font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 579.46px; top: 533.508px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00058);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 793.301px; top: 589.515px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.04129);">Leave</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 775.343px; top: 599.567px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00048);">Compiled</span><span role="presentation" dir="ltr" style="left: 811.73px; top: 599.567px; font-size: 8.6164px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 813.982px; top: 599.567px; font-size: 8.6164px; font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 818.93px; top: 599.567px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00058);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 670.639px; top: 386.311px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00041);">loop</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 669.2px; top: 396.364px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00047);">edge</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 639.766px; top: 452.37px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00065);">hot</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 629.708px; top: 462.423px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00058);">loop/exit</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 558.746px; top: 426.521px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00061);">abort</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 550.605px; top: 436.573px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00052);">recording</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 589.261px; top: 484.682px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00075);">fi</span><span role="presentation" dir="ltr" style="left: 593.57px; top: 484.682px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00065);">nish at</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 581.352px; top: 494.734px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00051);">loop header</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 735.733px; top: 394.928px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00056);">cold/blacklisted</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 748.902px; top: 404.98px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00058);">loop/exit</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 740.522px; top: 430.111px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.0006);">compiled trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 757.762px; top: 440.164px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00056);">ready</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 708.442px; top: 492.939px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00056);">loop edge with</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 714.198px; top: 502.992px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00069);">same types</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 864.265px; top: 571.564px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00069);">side exit to</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 859.478px; top: 581.616px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00064);">existing trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 712.404px; top: 567.974px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00067);">side exit,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 698.034px; top: 578.026px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00064);">no existing trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 845.117px; top: 360.462px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00061);">Overhead</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 842.243px; top: 382.003px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00063);">Interpreting</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 851.825px; top: 402.826px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.00058);">Native</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 841.53px; top: 341.793px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(1.07362);">Symbol Key</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 652.515px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.982706);">Figure 2.</span><span role="presentation" dir="ltr" style="left: 586.294px; top: 652.515px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 593.773px; top: 652.515px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.927825);">State machine describing the major activities of Trace-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 669.119px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.940917);">Monkey and the conditions that cause transitions to a new activ-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 685.724px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.970176);">ity. In the dark box, TM executes JS as compiled traces. In the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 702.328px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.90376);">light gray boxes, TM executes JS in the standard interpreter. White</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 718.932px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.92464);">boxes are overhead. Thus, to maximize performance, we need to</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 735.537px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.907242);">maximize time spent in the darkest box and minimize time spent in</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 752.141px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.886959);">the white boxes. The best case is a loop where the types at the loop</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 768.746px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.885349);">edge are the same as the types on entry–then TM can stay in native</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 785.35px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.910775);">code until the loop is done.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 832.843px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.921086);">a set of industry benchmarks. The paper ends with conclusions in</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 849.447px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.898557);">Section 9 and an outlook on future work is presented in Section 10.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 885.795px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.899536);">2.</span><span role="presentation" dir="ltr" style="left: 542.055px; top: 885.795px; font-size: 18.2648px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 560.32px; top: 885.795px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.986154);">Overview: Example Tracing Run</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 911.698px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.971505);">This section provides an overview of our system by describing</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 928.302px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.945918);">how TraceMonkey executes an example program. The example</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 944.907px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.903805);">program, shown in Figure 1, computes the first 100 prime numbers</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 961.511px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.886973);">with nested loops. The narrative should be read along with Figure 2,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 978.115px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.925894);">which describes the activities TraceMonkey performs and when it</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 994.72px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.898773);">transitions between the loops.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 548.281px; top: 1011.32px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.931637);">TraceMonkey always begins executing a program in the byte-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1027.93px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.944561);">code interpreter. Every loop back edge is a potential trace point.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1044.53px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.933026);">When the interpreter crosses a loop edge, TraceMonkey invokes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1061.14px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.879286);">the</span><span role="presentation" dir="ltr" style="left: 546.618px; top: 1061.14px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 550.931px; top: 1061.14px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.942083);">trace monitor</span><span role="presentation" dir="ltr" style="left: 633.056px; top: 1061.14px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.916559);">, which may decide to record or execute a native</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1077.74px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.896993);">trace. At the start of execution, there are no compiled traces yet, so</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1094.35px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.878882);">the trace monitor counts the number of times each loop back edge is</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1110.95px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.885587);">executed until a loop becomes</span><span role="presentation" dir="ltr" style="left: 707.086px; top: 1110.95px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 710.371px; top: 1110.95px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.919581);">hot</span><span role="presentation" dir="ltr" style="left: 729.47px; top: 1110.95px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.900506);">, currently after 2 crossings. Note</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1127.55px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.880454);">that the way our loops are compiled, the loop edge is crossed before</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1144.16px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.908872);">entering the loop, so the second crossing occurs immediately after</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1160.76px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.928404);">the first iteration.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 548.281px; top: 1177.37px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.980278);">Here is the sequence of events broken down by outer loop</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1193.97px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.941733);">iteration:</span><div class="endOfContent"></div></div></div><div class="page" data-page-number="3" role="region" aria-label="Page 3" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas width="2040" height="2640" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span role="presentation" dir="ltr" style="left: 90px; top: 118.423px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">v0 := ld state[748]</span><span role="presentation" dir="ltr" style="left: 239.066px; top: 118.423px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 118.423px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// load primes from the trace activation record</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 137.073px; top: 135.027px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">st sp[0], v0</span><span role="presentation" dir="ltr" style="left: 231.22px; top: 135.027px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 135.027px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// store primes to interpreter stack</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 151.631px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">v1 := ld state[764]</span><span role="presentation" dir="ltr" style="left: 239.066px; top: 151.631px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 151.631px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// load k from the trace activation record</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 168.236px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">v2 := i2f(v1)</span><span role="presentation" dir="ltr" style="left: 191.993px; top: 168.236px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 168.236px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// convert k from int to double</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 137.073px; top: 184.84px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">st sp[8], v1</span><span role="presentation" dir="ltr" style="left: 231.22px; top: 184.84px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 184.84px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// store k to interpreter stack</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 137.073px; top: 201.445px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">st sp[16], 0</span><span role="presentation" dir="ltr" style="left: 231.22px; top: 201.445px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 201.445px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// store false to interpreter stack</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 218.049px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">v3 := ld v0[4]</span><span role="presentation" dir="ltr" style="left: 199.838px; top: 218.049px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 218.049px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// load class word for primes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 234.653px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">v4 := and v3, -4</span><span role="presentation" dir="ltr" style="left: 215.53px; top: 234.653px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 234.653px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// mask out object class tag for primes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 251.258px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">v5 := eq v4, Array</span><span role="presentation" dir="ltr" style="left: 231.221px; top: 251.258px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 251.258px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// test whether primes is an array</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 137.073px; top: 267.862px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">xf v5</span><span role="presentation" dir="ltr" style="left: 176.301px; top: 267.862px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 267.862px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// side exit if v5 is false</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 284.467px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">v6 := js_Array_set(v0, v2, false)</span><span role="presentation" dir="ltr" style="left: 348.905px; top: 284.467px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 364.596px; top: 284.467px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// call function to set array element</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 301.071px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">v7 := eq v6, 0</span><span role="presentation" dir="ltr" style="left: 199.838px; top: 301.071px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 301.071px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// test return value from call</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 137.073px; top: 317.675px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">xt v7</span><span role="presentation" dir="ltr" style="left: 176.301px; top: 317.675px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 278.294px; top: 317.675px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// side exit if js_Array_set returns false.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 356.747px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(1.0249);">Figure 3. LIR snippet for sample program.</span><span role="presentation" dir="ltr" style="left: 373.398px; top: 356.747px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 378.618px; top: 356.747px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.961014);">This is the LIR recorded for line 5 of the sample program in Figure 1. The LIR encodes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 373.351px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.933987);">the semantics in SSA form using temporary variables. The LIR also encodes all the stores that the interpreter would do to its data stack.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 389.956px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.903283);">Sometimes these stores can be optimized away as the stack locations are live only on exits to the interpreter. Finally, the LIR records guards</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 406.56px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.906363);">and side exits to verify the assumptions made in this recording: that</span><span role="presentation" dir="ltr" style="left: 493.428px; top: 406.56px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 497.158px; top: 406.56px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">primes</span><span role="presentation" dir="ltr" style="left: 544.232px; top: 406.56px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 547.967px; top: 406.56px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.88673);">is an array and that the call to set its element succeeds.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 450.147px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov edx, ebx(748)</span><span role="presentation" dir="ltr" style="left: 223.375px; top: 450.147px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 450.147px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// load primes from the trace activation record</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 466.751px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov edi(0), edx</span><span role="presentation" dir="ltr" style="left: 207.684px; top: 466.751px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 466.751px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) store primes to interpreter stack</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 483.356px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov esi, ebx(764)</span><span role="presentation" dir="ltr" style="left: 223.375px; top: 483.356px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 483.356px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// load k from the trace activation record</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 499.96px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov edi(8), esi</span><span role="presentation" dir="ltr" style="left: 207.684px; top: 499.96px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 499.96px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) store k to interpreter stack</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 516.564px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov edi(16), 0</span><span role="presentation" dir="ltr" style="left: 199.838px; top: 516.564px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 516.564px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) store false to interpreter stack</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 533.169px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov eax, edx(4)</span><span role="presentation" dir="ltr" style="left: 207.684px; top: 533.169px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 533.169px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) load object class word for primes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 549.773px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">and eax, -4</span><span role="presentation" dir="ltr" style="left: 176.302px; top: 549.773px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 549.773px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) mask out object class tag for primes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 566.378px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">cmp eax, Array</span><span role="presentation" dir="ltr" style="left: 199.838px; top: 566.378px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 566.378px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) test whether primes is an array</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 582.982px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">jne side_exit_1</span><span role="presentation" dir="ltr" style="left: 207.684px; top: 582.982px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 582.982px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) side exit if primes is not an array</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 599.586px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">sub esp, 8</span><span role="presentation" dir="ltr" style="left: 168.456px; top: 599.586px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 599.586px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// bump stack for call alignment convention</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 616.191px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">push false</span><span role="presentation" dir="ltr" style="left: 168.456px; top: 616.191px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 616.191px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// push last argument for call</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 632.795px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">push esi</span><span role="presentation" dir="ltr" style="left: 152.765px; top: 632.795px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 632.795px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// push first argument for call</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 649.4px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">call js_Array_set</span><span role="presentation" dir="ltr" style="left: 223.375px; top: 649.4px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 649.4px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// call function to set array element</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 666.004px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">add esp, 8</span><span role="presentation" dir="ltr" style="left: 168.456px; top: 666.004px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 666.004px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// clean up extra stack space</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 682.608px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov ecx, ebx</span><span role="presentation" dir="ltr" style="left: 184.147px; top: 682.608px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 682.608px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) created by register allocator</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 699.213px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">test eax, eax</span><span role="presentation" dir="ltr" style="left: 191.993px; top: 699.213px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 699.213px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) test return value of js_Array_set</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 715.817px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">je side_exit_2</span><span role="presentation" dir="ltr" style="left: 199.838px; top: 715.817px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 715.817px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// (*) side exit if call failed</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 732.422px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">...</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 749.026px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">side_exit_1:</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 765.63px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov ecx, ebp(-4)</span><span role="presentation" dir="ltr" style="left: 215.53px; top: 765.63px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 765.63px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// restore ecx</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 782.235px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">mov esp, ebp</span><span role="presentation" dir="ltr" style="left: 184.147px; top: 782.235px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 782.235px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// restore esp</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 798.839px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">jmp epilog</span><span role="presentation" dir="ltr" style="left: 168.456px; top: 798.839px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 270.449px; top: 798.839px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">// jump to ret statement</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 837.911px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.972926);">Figure 4. x86 snippet for sample program.</span><span role="presentation" dir="ltr" style="left: 359.844px; top: 837.911px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 363.189px; top: 837.911px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.918571);">This is the x86 code compiled from the LIR snippet in Figure 3. Most LIR instructions compile</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 854.515px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.940992);">to a single x86 instruction. Instructions marked with</span><span role="presentation" dir="ltr" style="left: 408.023px; top: 854.515px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 412.612px; top: 854.515px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">(*)</span><span role="presentation" dir="ltr" style="left: 436.149px; top: 854.515px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 440.745px; top: 854.515px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.935037);">would be omitted by an idealized compiler that knew that none of the side exits</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 871.12px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.914852);">would ever be taken. The 17 instructions generated by the compiler compare favorably with the 100+ instructions that the interpreter would</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 887.724px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.906029);">execute for the same code snippet, including 4 indirect jumps.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 937.452px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.974571);">i=2.</span><span role="presentation" dir="ltr" style="left: 133.806px; top: 937.452px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 139.669px; top: 937.452px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.98837);">This is the first iteration of the outer loop. The loop on</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 954.056px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.90658);">lines 4-5 becomes hot on its second iteration, so TraceMonkey en-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 970.661px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.947773);">ters recording mode on line 4. In recording mode, TraceMonkey</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 987.265px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.914104);">records the code along the trace in a low-level compiler intermedi-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1003.87px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.896559);">ate representation we call</span><span role="presentation" dir="ltr" style="left: 242.638px; top: 1003.87px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 246.484px; top: 1003.87px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.964175);">LIR</span><span role="presentation" dir="ltr" style="left: 268.9px; top: 1003.87px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.905612);">. The LIR trace encodes all the oper-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1020.47px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.908827);">ations performed and the types of all operands. The LIR trace also</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1037.08px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.852173);">encodes</span><span role="presentation" dir="ltr" style="left: 138.135px; top: 1037.08px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 142.45px; top: 1037.08px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.89669);">guards</span><span role="presentation" dir="ltr" style="left: 183.411px; top: 1037.08px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.937299);">, which are checks that verify that the control flow</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1053.68px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.935375);">and types are identical to those observed during trace recording.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1070.29px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.924578);">Thus, on later executions, if and only if all guards are passed, the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1086.89px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.887146);">trace has the required program semantics.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 1103.5px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.95504);">TraceMonkey stops recording when execution returns to the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1120.1px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.912257);">loop header or exits the loop. In this case, execution returns to the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1136.7px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.904007);">loop header on line 4.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 109.925px; top: 1153.31px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.926018);">After recording is finished, TraceMonkey compiles the trace to</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1169.91px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.939073);">native code using the recorded type information for optimization.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 90px; top: 1186.52px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.979289);">The result is a native code fragment that can be entered if the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 937.452px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.901999);">interpreter PC and the types of values match those observed when</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 954.056px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.950332);">trace recording was started. The first trace in our example,</span><span role="presentation" dir="ltr" style="left: 895.291px; top: 954.056px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 901.159px; top: 954.056px; font-size: 14.944px; font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 910.119px; top: 959.702px; font-size: 9.96267px; font-family: sans-serif; transform: scaleX(1.09891);">45</span><span role="presentation" dir="ltr" style="left: 923.126px; top: 954.056px; font-size: 14.944px; font-family: sans-serif;">,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 970.661px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.890313);">covers lines 4 and 5. This trace can be entered if the PC is at line 4,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 987.265px; font-size: 14.944px; font-family: monospace;">i</span><span role="presentation" dir="ltr" style="left: 536.202px; top: 987.265px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 539.646px; top: 987.265px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.865702);">and</span><span role="presentation" dir="ltr" style="left: 561.225px; top: 987.265px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 564.67px; top: 987.265px; font-size: 14.944px; font-family: monospace;">k</span><span role="presentation" dir="ltr" style="left: 572.515px; top: 987.265px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 575.96px; top: 987.265px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.869934);">are integers, and</span><span role="presentation" dir="ltr" style="left: 673.499px; top: 987.265px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 676.943px; top: 987.265px; font-size: 14.944px; font-family: monospace; transform: scaleX(0.875092);">primes</span><span role="presentation" dir="ltr" style="left: 724.016px; top: 987.265px; font-size: 14.944px; font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 727.46px; top: 987.265px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.931962);">is an object. After compiling</span><span role="presentation" dir="ltr" style="left: 897.717px; top: 987.265px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 901.159px; top: 987.265px; font-size: 14.944px; font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 910.119px; top: 992.911px; font-size: 9.96267px; font-family: sans-serif; transform: scaleX(1.09891);">45</span><span role="presentation" dir="ltr" style="left: 923.126px; top: 987.265px; font-size: 14.944px; font-family: sans-serif;">,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1003.87px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.908702);">TraceMonkey returns to the interpreter and loops back to line 1.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 548.281px; top: 1020.47px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.974571);">i=3.</span><span role="presentation" dir="ltr" style="left: 572.162px; top: 1020.47px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 577.137px; top: 1020.47px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.930949);">Now the loop header at line 1 has become hot, so Trace-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1037.08px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.945968);">Monkey starts recording. When recording reaches line 4, Trace-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1053.68px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.915728);">Monkey observes that it has reached an inner loop header that al-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1070.29px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.920512);">ready has a compiled trace, so TraceMonkey attempts to nest the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1086.89px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.912348);">inner loop inside the current trace. The first step is to call the inner</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1103.5px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.883702);">trace as a subroutine. This executes the loop on line 4 to completion</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1120.1px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.906565);">and then returns to the recorder. TraceMonkey verifies that the call</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1136.7px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.883759);">was successful and then records the call to the inner trace as part of</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1153.31px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.910554);">the current trace. Recording continues until execution reaches line</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1169.91px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.931197);">1, and at which point TraceMonkey finishes and compiles a trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 528.356px; top: 1186.52px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.921484);">for the outer loop,</span><span role="presentation" dir="ltr" style="left: 636.267px; top: 1186.52px; font-size: 14.944px; font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 640.002px; top: 1186.52px; font-size: 14.944px; font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 648.962px; top: 1192.16px; font-size: 9.96267px; font-family: sans-serif; transform: scaleX(1.09891);">16</span><span role="presentation" dir="ltr" style="left: 661.968px; top: 1186.52px; font-size: 14.944px; font-family: sans-serif;">.</span><div class="endOfContent"></div></div></div><div class="page" data-page-number="4" role="region" aria-label="Page 4" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="5" role="region" aria-label="Page 5" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="6" role="region" aria-label="Page 6" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="7" role="region" aria-label="Page 7" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="8" role="region" aria-label="Page 8" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="9" role="region" aria-label="Page 9" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="10" role="region" aria-label="Page 10" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="11" role="region" aria-label="Page 11" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="12" role="region" aria-label="Page 12" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="13" role="region" aria-label="Page 13" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div><div class="page" data-page-number="14" role="region" aria-label="Page 14" style="width: 1019px; height: 1319px;"><div class="loadingIcon notVisible" role="img" aria-label="Loading…"></div></div></div>
        </div>

        <div id="errorWrapper" hidden="true">
          <div id="errorMessageLeft">
            <span id="errorMessage"></span>
            <button id="errorShowMore" data-l10n-id="error_more_info">More Information</button>
            <button id="errorShowLess" data-l10n-id="error_less_info" hidden="true">Less Information</button>
          </div>
          <div id="errorMessageRight">
            <button id="errorClose" data-l10n-id="error_close">Close</button>
          </div>
          <div class="clearBoth"></div>
          <textarea id="errorMoreInfo" hidden="true" readonly="readonly"></textarea>
        </div>
      </div> <!-- mainContainer -->

      <div id="overlayContainer" class="hidden">
        <div id="passwordOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <p id="passwordText" data-l10n-id="password_label">Enter the password to open this PDF file.</p>
            </div>
            <div class="row">
              <input type="password" id="password" class="toolbarField">
            </div>
            <div class="buttonRow">
              <button id="passwordCancel" class="overlayButton"><span data-l10n-id="password_cancel">Cancel</span></button>
              <button id="passwordSubmit" class="overlayButton"><span data-l10n-id="password_ok">OK</span></button>
            </div>
          </div>
        </div>
        <div id="documentPropertiesOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <span data-l10n-id="document_properties_file_name">File name:</span> <p id="fileNameField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_file_size">File size:</span> <p id="fileSizeField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_title">Title:</span> <p id="titleField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_author">Author:</span> <p id="authorField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_subject">Subject:</span> <p id="subjectField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_keywords">Keywords:</span> <p id="keywordsField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_creation_date">Creation Date:</span> <p id="creationDateField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_modification_date">Modification Date:</span> <p id="modificationDateField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_creator">Creator:</span> <p id="creatorField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_producer">PDF Producer:</span> <p id="producerField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_version">PDF Version:</span> <p id="versionField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_page_count">Page Count:</span> <p id="pageCountField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_page_size">Page Size:</span> <p id="pageSizeField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_linearized">Fast Web View:</span> <p id="linearizedField">-</p>
            </div>
            <div class="buttonRow">
              <button id="documentPropertiesClose" class="overlayButton"><span data-l10n-id="document_properties_close">Close</span></button>
            </div>
          </div>
        </div>
        <div id="printServiceOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <span data-l10n-id="print_progress_message">Preparing document for printing…</span>
            </div>
            <div class="row">
              <progress value="0" max="100"></progress>
              <span data-l10n-id="print_progress_percent" data-l10n-args="{ &quot;progress&quot;: 0 }" class="relative-progress">0%</span>
            </div>
            <div class="buttonRow">
              <button id="printCancel" class="overlayButton"><span data-l10n-id="print_progress_close">Cancel</span></button>
            </div>
          </div>
        </div>
      </div>  <!-- overlayContainer -->

    </div> <!-- outerContainer -->
    <div id="printContainer"></div>
  
</body></html>